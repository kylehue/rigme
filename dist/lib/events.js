"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var utils=require("./utils.js"),_once=!1,Events=function(){function e(){_classCallCheck(this,e),this.emits={},this.listeners=[],this.maxListeners=100}return _createClass(e,[{key:"setMaxListeners",value:function(e){this.maxListeners=e}},{key:"removeListener",value:function(t,n){var e=this.listeners.find(function(e){return e[t]===n});if(e=!n?t:e)for(var s=0;s<this.listeners.length;s++)if(this.listeners[s].id===e.id){this.listeners.splice(s,1);break}}},{key:"emit",value:function(e){if(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);t.shift(),this.emits[e]=t;for(var s=[],n=0;n<this.listeners.length;n++){var i=this.listeners[n];i.name===e&&s.push(i)}for(n=0;n<s.length;n++){var r=s[n];"function"==typeof r.method&&(r.method.apply(r,t),r.once&&this.removeListener("id",r.id))}}}},{key:"on",value:function(e,t){if(e&&t&&"function"==typeof t){t={id:utils.uid(),name:e,method:t,once:_once};return this.listeners.push(t),this.listeners.length>=this.maxListeners&&(this.listeners.shift(),console.warn("Reached the max number of listeners.")),t}}},{key:"once",value:function(e,t){_once=!0;t=this.on(e,t);return _once=!1,t}}]),e}(),events=new Events;module.exports=events;