"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var utils=require("../../lib/utils.js"),config=require("../../lib/config.js"),events=require("../../lib/events.js"),History=function(){function e(){_classCallCheck(this,e),this.events=[],this.present=null,this.maxStates=300,this.eventCount=0}return _createClass(e,[{key:"add",value:function(e){e=e||{},this.present&&this.events.splice(0,this.events.indexOf(this.present));e={id:"E"+utils.uid(),label:e.label,value:e.value,group:e.group,time:Date.now()};this.present=e,this.events.push(e),this.sortByLatest(),this.events.length>this.maxStates&&this.events.pop(),this.eventCount++,events.emit("historyChange")}},{key:"sortByLatest",value:function(){this.events.sort(function(e,t){return t.time-e.time})}},{key:"sortByOldest",value:function(){this.events.sort(function(e,t){return e.time-t.time})}},{key:"getLatest",value:function(){return this.events[0]}},{key:"getOldest",value:function(){return this.events[this.events.length-1]}},{key:"getNext",value:function(){return this.events[this.events.indexOf(this.present)-1]||null}},{key:"getPrevious",value:function(){return this.events[this.events.indexOf(this.present)+1]||null}},{key:"forward",value:function(){this.present=this.getNext()}},{key:"backward",value:function(){this.present=this.getPrevious()}},{key:"jump",value:function(t){var e=this.events.find(function(e){return e.id===t});t&&(this.present=e)}}]),e}(),history=new History;module.exports=history;